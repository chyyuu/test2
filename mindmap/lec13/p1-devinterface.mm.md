### 第一节 设备接口

- 要解决的问题
  - 为何设备的差异性那么大？
  - 为何要管理设备？
  - 如何统一对设备的访问接口？
  - 为何要对设备建立抽象？
  - 如何感知设备的状态并管理设备？
  - 如何提高 CPU 与设备的访问性能？
  - 如何保证 I/O 操作的可靠性？
- 内核 I/O 结构
- 常见设备接口类型
  - 设备的发展历史
    - 简单设备
    - 多设备
    - 支持中断的设备
    - 高吞吐量设备
    - 各种其他设备
    - 连接方式
  - 常见设备类型
    - 字符设备
      - GPIO, 键盘/鼠标, 串口等
    - 块设备
      - 磁盘驱动器、磁带驱动器、光驱等
    - 网络设备
      - ethernet、wifi、bluetooth 等
- 设备访问特征
  - 字符设备
    - 以字节为单位顺序访问
    - I/O 命令：get()、put() 等
    - 通常使用文件访问接口和语义
  - 块设备
    - 均匀的数据块访问
    - I/O 命令：原始 I/O 或文件系统接口、内存映射文件访问
    - 通常使用文件访问接口和语义
  - 网络设备
    - 格式化报文交换
    - I/O 命令：send/receive 网络报文，通过网络接口支持多种网络协议
    - 通常使用 socket 访问接口和语义
- 设备传输方式
  - 程序控制 I/O (PIO)
  - 中断传输方式
  - DMA 传输方式
- CPU 与设备的连接
- 读取磁盘数据的例子
- I/O 请求生存周期
- I/O执行模型
  - I/O 接口的交互协议
    - 基于轮询的抽象设备接口
    - 基于中断的抽象设备接口
  - 设备抽象
    - 基于文件的 I/O 设备抽象
    - 基于流的 I/O 设备抽象
    - 基于virtio的 I/O 设备抽象
  - 分类
    - blocking I/O
    - nonblocking I/O
    - I/O multiplexing
    - signal driven I/O
    - asynchronous I/O
  - 比较
    - 阻塞 I/O
    - 非阻塞 I/O
    - 多路复用 I/O
    - 信号驱动 I/O
    - 异步 I/O






### 第二节 协程（Coroutine）
- 线程存在的不足
  - 大规模并发I/O操作场景
    - 大量线程占内存总量大
    - 管理线程开销大
      - 创建/删除/切换
    - 访问共享数据易错
- 协程的概念
  - 协程的提出
    - 由Melvin Conway在1963年提出并实现
      - 行为与主程序相似的子例程
      - 支持大规模并发I/O异步操作
  - 协程的定义
    - Wiki定义: 协程是一种程序组件，允许多个入口点，可在指定位置挂起和恢复执行
    - 核心思想：控制流的主动让出与恢复
  - 协程与用户线程的比较
    - 协程内存占用更小
    - 不需多线程锁机制，无同时写变量冲突，执行效率高
  - 协程示例 (Python)
    - 普通函数 vs 协程函数
      - 普通函数: 顺序执行
      - 协程函数: 可在执行中断并恢复
- 协程的实现方式
  - 控制传递机制
    - 对称协程: 在协程间直接传递控制
    - 非对称协程: 挂起时将控制返回给调用者
  - 基于栈的构造
    - 有栈协程: 有独立的上下文空间
    - 无栈协程: 数据保存在堆上
  - 编程语言中的第一类对象
    - First-class对象: 协程可以作为参数传递，由函数创建并返回
